{
  "version": 3,
  "sources": ["../../src/components/animation/animation.component.ts"],
  "sourcesContent": ["import { animations } from './animations';\nimport { html } from 'lit';\nimport { property, queryAsync } from 'lit/decorators.js';\nimport { watch } from '../../internal/watch';\nimport componentStyles from '../../styles/component.styles';\nimport styles from './animation.styles';\nimport UIKitElement from '../../internal/uikit-element';\nimport type { CSSResultGroup } from 'lit';\n/**\n * @summary Animate elements declaratively with nearly 100 baked-in presets, or roll your own with custom keyframes. Powered by the [Web Animations API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API).\n * @documentation https://kind-desert-0fb80550f.5.azurestaticapps.net\n * @status stable\n * @since 2.0\n *\n * @event koerber-cancel - Emitted when the animation is canceled.\n * @event koerber-finish - Emitted when the animation finishes.\n * @event koerber-start - Emitted when the animation starts or restarts.\n *\n * @slot - The element to animate. Avoid slotting in more than one element, as subsequent ones will be ignored. To\n *  animate multiple elements, either wrap them in a single container or use multiple `<koerber-animation>` elements.\n */\nexport default class KoerberAnimation extends UIKitElement {\n  static styles: CSSResultGroup = [componentStyles, styles];\n\n  private animation?: Animation;\n  private hasStarted = false;\n\n  @queryAsync('slot') defaultSlot: Promise<HTMLSlotElement>;\n\n  /** The name of the built-in animation to use. For custom animations, use the `keyframes` prop. */\n  @property() name = 'none';\n\n  /**\n   * Plays the animation. When omitted, the animation will be paused. This attribute will be automatically removed when\n   * the animation finishes or gets canceled.\n   */\n  @property({ type: Boolean, reflect: true }) play = false;\n\n  /** The number of milliseconds to delay the start of the animation. */\n  @property({ type: Number }) delay = 0;\n\n  /**\n   * Determines the direction of playback as well as the behavior when reaching the end of an iteration.\n   * [Learn more](https://developer.mozilla.org/en-US/docs/Web/CSS/animation-direction)\n   */\n  @property() direction: PlaybackDirection = 'normal';\n\n  /** The number of milliseconds each iteration of the animation takes to complete. */\n  @property({ type: Number }) duration = 1000;\n\n  /**\n   * The easing function to use for the animation. This can be a Shoelace easing function or a custom easing function\n   * such as `cubic-bezier(0, 1, .76, 1.14)`.\n   */\n  @property() easing = 'linear';\n\n  /** The number of milliseconds to delay after the active period of an animation sequence. */\n  @property({ attribute: 'end-delay', type: Number }) endDelay = 0;\n\n  /** Sets how the animation applies styles to its target before and after its execution. */\n  @property() fill: FillMode = 'auto';\n\n  /** The number of iterations to run before the animation completes. Defaults to `Infinity`, which loops. */\n  @property({ type: Number }) iterations = Infinity;\n\n  /** The offset at which to start the animation, usually between 0 (start) and 1 (end). */\n  @property({ attribute: 'iteration-start', type: Number }) iterationStart = 0;\n\n  /** The keyframes to use for the animation. If this is set, `name` will be ignored. */\n  @property({ attribute: false }) keyframes?: Keyframe[];\n\n  /**\n   * Sets the animation's playback rate. The default is `1`, which plays the animation at a normal speed. Setting this\n   * to `2`, for example, will double the animation's speed. A negative value can be used to reverse the animation. This\n   * value can be changed without causing the animation to restart.\n   */\n  @property({ attribute: 'playback-rate', type: Number }) playbackRate = 1;\n\n  /** Gets and sets the current animation time. */\n  get currentTime(): CSSNumberish {\n    return this.animation?.currentTime ?? 0;\n  }\n\n  set currentTime(time: number) {\n    if (this.animation) {\n      this.animation.currentTime = time;\n    }\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.createAnimation();\n    this.handleAnimationCancel = this.handleAnimationCancel.bind(this);\n    this.handleAnimationFinish = this.handleAnimationFinish.bind(this);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.destroyAnimation();\n  }\n\n  private handleAnimationFinish() {\n    this.play = false;\n    this.hasStarted = false;\n    this.emit('koerber-finish');\n  }\n\n  private handleAnimationCancel() {\n    this.play = false;\n    this.hasStarted = false;\n    this.emit('koerber-cancel');\n  }\n\n  private handleSlotChange() {\n    this.destroyAnimation();\n    this.createAnimation();\n  }\n\n  private async createAnimation() {\n    const easing = animations.easings[this.easing] ?? this.easing;\n    const keyframes = this.keyframes ?? (animations as unknown as Partial<Record<string, Keyframe[]>>)[this.name];\n    const slot = await this.defaultSlot;\n    const element = slot.assignedElements()[0] as HTMLElement | undefined;\n\n    if (!element || !keyframes) {\n      return false;\n    }\n\n    this.destroyAnimation();\n    this.animation = element.animate(keyframes, {\n      delay: this.delay,\n      direction: this.direction,\n      duration: this.duration,\n      easing,\n      endDelay: this.endDelay,\n      fill: this.fill,\n      iterationStart: this.iterationStart,\n      iterations: this.iterations\n    });\n    this.animation.playbackRate = this.playbackRate;\n    this.animation.addEventListener('cancel', this.handleAnimationCancel);\n    this.animation.addEventListener('finish', this.handleAnimationFinish);\n\n    if (this.play) {\n      this.hasStarted = true;\n      this.emit('koerber-start');\n    } else {\n      this.animation.pause();\n    }\n\n    return true;\n  }\n\n  private destroyAnimation() {\n    if (this.animation) {\n      this.animation.cancel();\n      this.animation.removeEventListener('cancel', this.handleAnimationCancel);\n      this.animation.removeEventListener('finish', this.handleAnimationFinish);\n      this.hasStarted = false;\n    }\n  }\n\n  @watch([\n    'name',\n    'delay',\n    'direction',\n    'duration',\n    'easing',\n    'endDelay',\n    'fill',\n    'iterations',\n    'iterationsStart',\n    'keyframes'\n  ])\n  handleAnimationChange() {\n    if (!this.hasUpdated) {\n      return;\n    }\n\n    this.createAnimation();\n  }\n\n  @watch('play')\n  handlePlayChange() {\n    if (this.animation) {\n      if (this.play && !this.hasStarted) {\n        this.hasStarted = true;\n        this.emit('koerber-start');\n      }\n\n      if (this.play) {\n        this.animation.play();\n      } else {\n        this.animation.pause();\n      }\n\n      return true;\n    }\n    return false;\n  }\n\n  @watch('playbackRate')\n  handlePlaybackRateChange() {\n    if (this.animation) {\n      this.animation.playbackRate = this.playbackRate;\n    }\n  }\n\n  /** Clears all keyframe effects caused by this animation and aborts its playback. */\n  cancel() {\n    this.animation?.cancel();\n  }\n\n  /** Sets the playback time to the end of the animation corresponding to the current playback direction. */\n  finish() {\n    this.animation?.finish();\n  }\n\n  render() {\n    return html` <slot @slotchange=${this.handleSlotChange}></slot> `;\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
